import { Source, Meta, Canvas } from "@storybook/blocks";

import * as AvatarStory from "../../examples/Three/Avatar/Avatar.stories";

import UEMannequins from "../../assets/screenshots/UEMannequins.png";
import MixamoCharacterRigging from "../../assets/screenshots/MixamoCharacterRigging.png";
import BlenderFlairAnimation from "../../assets/screenshots/BlenderFlairAnimation.png";
import Paladin from "../../assets/screenshots/Paladin.png";

<Meta
  name="Notes/3D Rendering/ThreeJS and React"
  title="Notes/3D Rendering/ThreeJS and React"
/>

# ThreeJs and React

<time dateTime="2024-01-15">Jan 15, 2024</time>

<hr />

## Useful Links

- [three.js][1]
- @react-three
  - [fiber][2]
  - [drei][3]
- [Render youself in 3D using React & ThreeJs][4]

## Overview

Having spent a lot of time lately learning UE 5 & Blender I wanted to try some web-based 3D work. Currently, the most popular & feature-rich 3D rendering JS library is [three.js][1]. ThreeJs provides a comprehensive easy-to-understand, abstracted API for interacting with the [WebGL][5] rendering API.

As I mainly work with React I chose to use the [@react-three/fiber][2] renderer for ThreeJs as well as the associated abstraction/ helper function library [@react-three/drei][3]. Finally I used [@react-three/gltfjsx][8] to convert my model into a JSX component.

```bash
# convert gltf to jsx

npx gltfjsx src/assets/3DModels/avatar/Paladin.glb -t -r ./src/assets
```

## Animating a 3D Avatar

While reasearching React-based 3D tooling I cam across this great article: [Render youself in 3D using React & ThreeJs][4] by Nourdine Labib which I immediately had to try.

As suggested, I tried using [Ready Player Me][7] to create a 3D avatar of myself using a photo, but honestly, I found the results lacking. There was a lack of hairstyles/ clothing that were relevant to me personally, so I initially used a UE5 Mannequin.

However, I ended up using a Palading character from Mixamo as I thought it looked cooler.

I decided to put him in space using a cube camera/ texture to make a skybox. Because, why not ðŸ˜‚.

Finally, I used [lil-gui][9] to make a basic animation control panel (pinned top right).

<p align="center">
  <img src={UEMannequins} alt="Unreal Engine Mannequins" width="320px" />
  *Unreal Engine Mannequins*
</p>

<p align="center">
  <img
    src={MixamoCharacterRigging}
    alt="Rigging/ Animating Mannequins in Mixamo"
    width="320px"
  />
  *Rigging/ Animating Mannequins in Mixamo*
</p>

<p align="center">
  <img
    src={BlenderFlairAnimation}
    alt="Unreal Engine Mannequin in Blender"
    width="320px"
  />
  *Using Blender to convert the rigged + animated mannequin to .glb format*
</p>

<p align="center">
  <img src={Paladin} alt="Paladin Model" width="320px" />
  *Paladin model I settled on*
</p>

### Final Results

<Canvas of={AvatarStory.FlairAnimation} layout="centered" />

[1]: https://threejs.org/ "three.js"
[2]: https://github.com/pmndrs/react-three-fiber "@react-three/fiber"
[3]: https://github.com/pmndrs/drei "@react-three/drei"
[4]: https://dev.to/nourdinedev/how-to-use-threejs-and-react-to-render-a-3d-model-of-your-self-4kkf "Render youself in 3D using React & ThreeJs"
[5]: https://en.wikipedia.org/wiki/WebGL "WebGL rendering API"
[6]: https://www.mixamo.com "Mixamo 3D Character Rigging & Animations"
[7]: https://readyplayer.me/ "Create a 3D avatar using a photo of yourself"
[8]: https://github.com/pmndrs/gltfjsx "@react-three/gltfjsx convert GLTF model to JSX component"
[9]: https://github.com/georgealways/lil-gui?tab=readme-ov-file#lil-gui "lil-gui"
